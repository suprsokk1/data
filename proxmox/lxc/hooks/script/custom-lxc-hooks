#!/bin/bash
case $(systemd-detect-virt) in
  ( none:* )
  if [ -n "$LXC_ROOTFS_PATH" ]; then
    pushd ${LXC_ROOTFS_PATH} || exit
    trap 'popd' EXIT
    if ! [ -s ./bin/"${0##*/}" ]; then
      if install -vD --compare -- "$0" ./bin/; then
        printf 'lxc.hook.start = /bin/%s\n' "${0##*/}" > /usr/share/lxc/config/common.conf.d/11custom.conf
      fi
    fi
  fi

  set >> /var/log/${0##*/}.stdout
  ;;

  ( lxc )
  case $(hostname -s) in
    ( docker* )
    curl -sL https://get.docker.com | /bin/bash
    ;;
  esac
  ;;
esac

case ${LXC_HOOK_TYPE} in
  ( start )

  ;;

  ( pre-start )

  ;;
esac
